<!DOCTYPE html>
<html>
  <head>
    <title>WebSocket Test</title>
  </head>
  <body>
    <h1>WebSocket Connection Test</h1>
    <div id="status">Testing...</div>
    <div id="log"></div>

    <script>
      const log = document.getElementById("log");
      const status = document.getElementById("status");

      function addLog(message) {
        const p = document.createElement("p");
        p.textContent = new Date().toLocaleTimeString() + ": " + message;
        log.appendChild(p);
        console.log(message);
      }

      // Test ngrok WebSocket
      addLog("ğŸ” Testing ngrok WebSocket connection...");
      addLog("URL: wss://sheathier-achromatous-meredith.ngrok-free.dev");

      const ws = new WebSocket(
        "wss://sheathier-achromatous-meredith.ngrok-free.dev"
      );

      ws.onopen = () => {
        status.textContent = "âœ… CONNECTED!";
        status.style.color = "green";
        addLog("âœ… WebSocket connection opened successfully!");
      };

      ws.onerror = (error) => {
        status.textContent = "âŒ ERROR";
        status.style.color = "red";
        addLog("âŒ WebSocket error: " + error);
        console.error("Full error:", error);
      };

      ws.onclose = (event) => {
        addLog(
          "ğŸ”Œ WebSocket closed. Code: " +
            event.code +
            ", Reason: " +
            event.reason
        );
      };

      ws.onmessage = (event) => {
        addLog("ğŸ“¨ Message received: " + event.data);
      };
    </script>
  </body>
</html>
